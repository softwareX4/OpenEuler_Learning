# Docker学习笔记
## 概念
### 定义
Docker 是一个开源的、轻量级的容器引擎，主要运行于 Linux 和 Windows，用于创建、管理和编排容器。
- 镜像Image
包含有文件系统的、面向Docker引擎的、只读模板
提供运行环境
- 容器Container
轻量级的沙盒，极简的Linux系统环境(root权限、进程空间、用户空间、网络空间...)，以及运行在其中的应用程序。
Docker引擎利用容器来运行、隔离各个应用。容器是镜像创建的**应用实例**，可以**创建、启动、停止、删除**容器，各个容器之间是是相互隔离的，互不影响。
> 注意：镜像本身是只读的，容器从镜像启动时，Docker在镜像的上层创建一个**可写层**，镜像本身不变。
- 仓库Repository
类似于代码仓库，这里是镜像仓库，是Docker用来**集中存放镜像文件**的地方。注意与注册服务器（Registry）的区别：注册服务器是存放仓库的地方，一般会有多个仓库；而仓库是存放镜像的地方，一般每个仓库存放一类镜像，每个镜像利用tag进行区分，比如Ubuntu仓库存放有多个版本（12.04、14.04等）的Ubuntu镜像。

### Docker镜像
镜像是一个Docker的可执行文件，其中包括运行应用程序所需的所有代码内容、依赖库、环境变量和配置文件等。
**镜像管理**

![](.img/image.jpeg)

![](.img/image_mind.jpeg)

### Docker容器和虚拟机的区别
- 相同点
  - 容器和虚拟机一样，都会对**物理硬件资源**进行共享使用。
  - 容器和虚拟机的**生命周期**比较相似（**创建、运行、暂停、关闭**等等）。
  - 容器中或虚拟机中都可以安装各种应用，如redis、mysql、nginx等。也就是说，在容器中的操作，如同在一个虚拟机(操作系统)中操作一样。
  - 同虚拟机一样，容器创建后，会存储在宿主机上：linux上位于/var/lib/docker/containers下
- 不同点
  - 虚拟机的创建、启动和关闭都是基于一个完整的操作系统。一个虚拟机就是一个完整的操作系统。而容器**直接运行在宿主机的内核**上，其本质上以一系列**进程的结合**。
  - 容器是轻量级的，虚拟机是重量级的。首先容器**不需要额外的资源**来管理(不需要Hypervisor、Guest OS)，虚拟机额外更多的性能消耗；其次创建、启动或关闭容器，如同创建、启动或者关闭**进程**那么轻松，而创建、启动、关闭一个操作系统就没那么方便了。
也因此，意味着在给定的硬件上能运行更多数量的容器，甚至可以直接把Docker运行在虚拟机上。

### 容器的生命周期

![](.img/contain.png)

![](.img/contain_life.jpg)

